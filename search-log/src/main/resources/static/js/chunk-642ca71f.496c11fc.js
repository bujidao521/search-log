(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-642ca71f","chunk-2d21eac9"],{"1e93":function(e,t,a){},"25eb":function(e,t,a){var n=a("23e7"),i=a("c20d");n({target:"Number",stat:!0,forced:Number.parseInt!=i},{parseInt:i})},"498a":function(e,t,a){"use strict";var n=a("23e7"),i=a("58a8").trim,r=a("c8d2");n({target:"String",proto:!0,forced:r("trim")},{trim:function(){return i(this)}})},"4de4":function(e,t,a){"use strict";var n=a("23e7"),i=a("b727").filter,r=a("1dde"),o=a("ae40"),l=r("filter"),c=o("filter");n({target:"Array",proto:!0,forced:!l||!c},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},"586e":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"log-search"},[a("el-form",{ref:"logSearchForm",staticClass:"demo-form-inline",attrs:{"label-position":"right","label-width":"55px",model:e.param,onsubmit:"return false"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"应用"}},[a("el-select",{staticStyle:{width:"90%"},attrs:{filterable:"",remote:"","remote-method":e.getlistOption,placeholder:"请选择应用"},model:{value:e.param.appId,callback:function(t){e.$set(e.param,"appId",t)},expression:"param.appId"}},e._l(this.listOption,(function(e){return a("el-option",{key:e.id,attrs:{label:e.appName,value:e.id}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"文件"}},[a("el-autocomplete",{staticStyle:{width:"90%"},attrs:{"fetch-suggestions":function(t,a){return e.querySearch(t,a,"fileName")},placeholder:"可以使用模糊匹配*"},model:{value:e.param.fileName,callback:function(t){e.$set(e.param,"fileName",t)},expression:"param.fileName"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"行数"}},[a("el-input-number",{attrs:{"controls-position":"right",placeholder:"文件后n行",step:500,min:1},model:{value:e.param.tailNum,callback:function(t){e.$set(e.param,"tailNum",t)},expression:"param.tailNum"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"关键字",prop:"logSearchkeyword"}},[a("el-autocomplete",{staticStyle:{width:"90%"},attrs:{placeholder:"支持正则表达式","fetch-suggestions":function(t,a){return e.querySearch(t,a,"keyword")}},model:{value:e.param.keyword,callback:function(t){e.$set(e.param,"keyword",t)},expression:"param.keyword"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"命令"}},[a("el-autocomplete",{staticStyle:{width:"90%"},attrs:{placeholder:"C5前后5行;A5后5行等","fetch-suggestions":function(t,a){return e.querySearch(t,a,"upLine")}},model:{value:e.param.upLine,callback:function(t){e.$set(e.param,"upLine",t)},expression:"param.upLine"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-button",{staticStyle:{"margin-left":"15px"},attrs:{type:"primary"},on:{click:e.logSearch}},[e._v("查询")])],1)],1)],1),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.param}},[a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:e.isEmpty(e.param.appId)},on:{click:e.fileNameSearch}},[e._v("查文件")])],1)],1),e.fileNameList&&e.fileNameList.length>0?a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.fileNameLoading,expression:"fileNameLoading"}],staticClass:"log-search-card log-search-card-top",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)","element-loading-text":"拼命加载中"}},[a("el-collapse",{model:{value:e.fileActiveNames,callback:function(t){e.fileActiveNames=t},expression:"fileActiveNames"}},[e.fileNameList&&e.fileNameList.length>0?a("el-collapse-item",{attrs:{title:"系统文件名称",name:"0"}},e._l(e.fileNameList,(function(t,n){return a("p",[a("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(a){e.param.fileName=t}}},[e._v(e._s(t))])],1)})),0):e._e()],1)],1):e._e(),a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"log-search-card",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)","element-loading-text":"拼命加载中"}},[a("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[e._l(e.logInfoList,(function(t,n){return e.logInfoList.length>0?a("el-collapse-item",{attrs:{title:"主机:"+t.shellHost+" "+t.logs.length+"行",name:n}},e._l(t.logs,(function(t){return a("p",{staticStyle:{"margin-top":"10px","margin-bottom":"10px","line-height":"19px"},domProps:{innerHTML:e._s(t)}})})),0):e._e()})),e.logInfoList&&0!=e.logInfoList.length?e._e():a("div",{staticStyle:{height:"60vh"}},[a("h3",[e._v("未查询到日志")])])],2)],1)],1)},i=[],r=(a("4de4"),a("c975"),a("a434"),a("a9e3"),a("25eb"),a("498a"),a("d722")),o={name:"LogSearch",mounted:function(){for(name in this.getlistOption(""),this.$route.query.appId&&(this.param.appId=Number.parseInt(this.$route.query.appId)),this.cacheData.cacheKey)this.getCache(name)},methods:{getCache:function(e){var t=localStorage.getItem("logSearch"+e);t=JSON.parse(t),t||(t=[]),this.cacheData.cacheItem[e]=t},setCache:function(e){if(this.param[e]&&this.param[e].trim()){var t=localStorage.getItem("logSearch"+e),a={value:this.param[e].trim()},n=JSON.parse(t);if(t&&t.indexOf(JSON.stringify(a))>-1)for(var i in n){if(this.param[e].trim()==n[i]["value"]&&0==i)return;if(this.param[e].trim()==n[i]["value"]){n.splice(i,1);break}}n||(n=[]),n.unshift(a),n.length>this.cacheData.cacheKey[e]["num"]&&n.pop(),this.cacheData.cacheItem[e]=n,localStorage.setItem("logSearch"+e,JSON.stringify(n))}},isEmpty:function(e){return"undefined"==typeof e||null==e||""==e},querySearch:function(e,t,a){var n=e?this.cacheData.cacheItem[a].filter(this.createFilter(e)):this.cacheData.cacheItem[a];t(n)},createFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},fileNameSearch:function(){var e=this;this.fileNameLoading=!0,Object(r["SearchFileName"])(this.param.appId).then((function(t){e.fileNameLoading=!1,t&&200==t.codeStatus&&(e.fileNameList=t.data,e.fileNameList&&0!=e.fileNameList.length||e.$success("提示","不存在文件,请修改实例目录！"))}))},logSearch:function(){var e=this;this.loading=!0,Object(r["LogSearch"])(this.param).then((function(t){if(e.loading=!1,t&&200==t.codeStatus)for(name in e.logInfoList&&e.logInfoList.length>0&&(e.activeNames=[0]),e.logInfoList=t.data,e.cacheData.cacheKey)e.setCache(name)}))},getRemote:function(e){this.getlistOption(e)},getlistOption:function(e){var t=this;this.optionLoading=!0,Object(r["AppInfolistOption"])(e).then((function(e){t.optionLoading=!1,e&&200==e.codeStatus&&(t.listOption=e.data)}))}},data:function(){return{keyword:"",logInfoList:[],fileNameList:[],listOption:[],activeNames:[0],fileActiveNames:["0"],optionLoading:!1,fileNameLoading:!1,loading:!1,cacheData:{cacheItem:{},cacheKey:{keyword:{num:10},fileName:{num:10},upLine:{num:5}}},param:{appId:"",keyword:"",tailNum:"1000",upLine:"",fileName:""}}}},l=o,c=(a("ac07"),a("2877")),s=Object(c["a"])(l,n,i,!1,null,"4f090dec",null);t["default"]=s.exports},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,a){var n=a("1d80"),i=a("5899"),r="["+i+"]",o=RegExp("^"+r+r+"*"),l=RegExp(r+r+"*$"),c=function(e){return function(t){var a=String(n(t));return 1&e&&(a=a.replace(o,"")),2&e&&(a=a.replace(l,"")),a}};e.exports={start:c(1),end:c(2),trim:c(3)}},7156:function(e,t,a){var n=a("861d"),i=a("d2bb");e.exports=function(e,t,a){var r,o;return i&&"function"==typeof(r=t.constructor)&&r!==a&&n(o=r.prototype)&&o!==a.prototype&&i(e,o),e}},a9e3:function(e,t,a){"use strict";var n=a("83ab"),i=a("da84"),r=a("94ca"),o=a("6eeb"),l=a("5135"),c=a("c6b6"),s=a("7156"),u=a("c04e"),f=a("d039"),p=a("7c73"),d=a("241c").f,m=a("06cf").f,h=a("9bf2").f,g=a("58a8").trim,v="Number",N=i[v],I=N.prototype,S=c(p(I))==v,b=function(e){var t,a,n,i,r,o,l,c,s=u(e,!1);if("string"==typeof s&&s.length>2)if(s=g(s),t=s.charCodeAt(0),43===t||45===t){if(a=s.charCodeAt(2),88===a||120===a)return NaN}else if(48===t){switch(s.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+s}for(r=s.slice(2),o=r.length,l=0;l<o;l++)if(c=r.charCodeAt(l),c<48||c>i)return NaN;return parseInt(r,n)}return+s};if(r(v,!N(" 0o1")||!N("0b1")||N("+0x1"))){for(var y,L=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof L&&(S?f((function(){I.valueOf.call(a)})):c(a)!=v)?s(new N(b(t)),a,L):b(t)},x=n?d(N):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),O=0;x.length>O;O++)l(N,y=x[O])&&!l(L,y)&&h(L,y,m(N,y));L.prototype=I,I.constructor=L,o(i,v,L)}},ac07:function(e,t,a){"use strict";var n=a("1e93"),i=a.n(n);i.a},c20d:function(e,t,a){var n=a("da84"),i=a("58a8").trim,r=a("5899"),o=n.parseInt,l=/^[+-]?0[Xx]/,c=8!==o(r+"08")||22!==o(r+"0x16");e.exports=c?function(e,t){var a=i(String(e));return o(a,t>>>0||(l.test(a)?16:10))}:o},c8d2:function(e,t,a){var n=a("d039"),i=a("5899"),r="​᠎";e.exports=function(e){return n((function(){return!!i[e]()||r[e]()!=r||i[e].name!==e}))}},c975:function(e,t,a){"use strict";var n=a("23e7"),i=a("4d64").indexOf,r=a("a640"),o=a("ae40"),l=[].indexOf,c=!!l&&1/[1].indexOf(1,-0)<0,s=r("indexOf"),u=o("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:c||!s||!u},{indexOf:function(e){return c?l.apply(this,arguments)||0:i(this,e,arguments.length>1?arguments[1]:void 0)}})},d722:function(e,t,a){"use strict";a.r(t),a.d(t,"LogSearch",(function(){return i})),a.d(t,"LogAllSearch",(function(){return r})),a.d(t,"SearchFileName",(function(){return o})),a.d(t,"AppInfoList",(function(){return l})),a.d(t,"AppInfoSaveOrUpdate",(function(){return c})),a.d(t,"AppInfoDelete",(function(){return s})),a.d(t,"AppInfolistOption",(function(){return u})),a.d(t,"InstanceDelete",(function(){return f})),a.d(t,"InstanceSaveOrUpdate",(function(){return p})),a.d(t,"InstanceList",(function(){return d}));var n=a("2ade"),i=function(e){return n["default"].post("/log/search",e)},r=function(e){return n["default"].post("/log/allSearch",e)},o=function(e){return n["default"].get("/log/searchFileName?appId=".concat(e))},l=function(e){return n["default"].post("/info/list",e)},c=function(e){return n["default"].post("/info/saveOrUpdate",e)},s=function(e){return n["default"].get("/info/delete?id=".concat(e))},u=function(e){return n["default"].get("/info/listOption?keyword=".concat(e))},f=function(e){return n["default"].get("/instance/delete?id=".concat(e))},p=function(e){return n["default"].post("/instance/saveOrUpdate",e)},d=function(e){return n["default"].post("/instance/list",e)}}}]);
//# sourceMappingURL=chunk-642ca71f.496c11fc.js.map